"use strict";(self["webpackChunkpvbackend"]=self["webpackChunkpvbackend"]||[]).push([[136],{5655:function(e,l,a){a.r(l),a.d(l,{default:function(){return P}});var t=a(3396),s=a(7139);const n=e=>((0,t.dD)("data-v-527fd612"),e=e(),(0,t.Cn)(),e),o={class:"layout"},r=n((()=>(0,t._)("button",{class:"out",style:{width:"42px",height:"32px","line-height":"35px"}}," 登出 ",-1))),i=n((()=>(0,t._)("h1",null,"訂單",-1))),d={key:0},p={key:1,class:"showAll"},u={key:2},h={class:"ivu-mb",style:{"margin-top":"30px"}},c={class:"ivu-mb"},_={class:"ivu-mb"},m={class:"ivu-mb"},w={class:"ivu-mb"},k={class:"ivu-mb"},g={class:"ivu-mb"},b={style:{width:"600px"}},v=n((()=>(0,t._)("p",{style:{"margin-bottom":"8px"}},"健康審核",-1))),U={class:"ivu-mb"},y={class:"ivu-mb"},x={class:"ivu-mb"},z={class:"ivu-mb"},f={class:"ivu-mb"},W={class:"ivu-mb"};function V(e,l,a,n,V,C){const M=(0,t.up)("Side"),O=(0,t.up)("Input"),D=(0,t.up)("Space"),S=(0,t.up)("Button"),P=(0,t.up)("Table"),N=(0,t.up)("Option"),T=(0,t.up)("Select"),Z=(0,t.up)("Layout"),B=(0,t.Q2)("width");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(M,{activePage:5}),r,(0,t.wy)(((0,t.wg)(),(0,t.j4)(Z,{style:{marginLeft:"300px"}},{default:(0,t.w5)((()=>[i,1==V.showMore?((0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(D,{style:{"margin-bottom":"10px","margin-right":"20px"}},{default:(0,t.w5)((()=>[(0,t.Uk)(" 訂單編號: "),(0,t.Wm)(O,{modelValue:V.searchOrder,"onUpdate:modelValue":l[0]||(l[0]=e=>V.searchOrder=e),onOnChange:C.handleSearch1,placeholder:"訂單編號",style:{width:"150px"}},null,8,["modelValue","onOnChange"])])),_:1}),(0,t.Wm)(D,{style:{"margin-bottom":"10px"}},{default:(0,t.w5)((()=>[(0,t.Uk)(" 會員編號: "),(0,t.Wm)(O,{modelValue:V.searchNumberMem,"onUpdate:modelValue":l[1]||(l[1]=e=>V.searchNumberMem=e),onOnChange:C.handleSearch1,placeholder:"會員編號",style:{width:"150px"}},null,8,["modelValue","onOnChange"])])),_:1}),(0,t.Wm)(P,{class:"Table",border:"",columns:V.columns,data:V.data},{action:(0,t.w5)((({row:e,index:l})=>[(0,t.Wm)(S,{size:"small",style:{"margin-right":"5px"},onClick:e=>{V.oindex=l,C.More()}},{default:(0,t.w5)((()=>[(0,t.Uk)("編輯")])),_:2},1032,["onClick"]),(0,t.Wm)(S,{size:"small",onClick:e=>C.remove(l)},{default:(0,t.w5)((()=>[(0,t.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1},8,["columns","data"])])):(0,t.kq)("",!0),2==V.showMore?((0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("p",null,[(0,t.Uk)("訂單編號： "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].orders_no),1)]),(0,t._)("p",null,[(0,t.Uk)("會員編號: "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].mem_no),1)]),(0,t._)("p",null,[(0,t.Uk)("出團編號： "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].trip_no),1)]),(0,t._)("p",null,[(0,t.Uk)("報名人數： "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].ord_people),1)]),(0,t._)("p",null,[(0,t.Uk)("訂購日期："),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].orders_date),1)]),(0,t._)("p",null,[(0,t.Uk)("總金額： "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].total_amount),1)]),(0,t._)("p",null,[(0,t.Uk)("訂單狀態： "),(0,t._)("span",null,(0,s.zw)(V.data[V.oindex].orders_stat),1)]),(0,t._)("div",null,[(0,t.Wm)(S,{size:"small",style:{"margin-right":"5px"},onClick:l[2]||(l[2]=e=>C.passenger(V.oindex))},{default:(0,t.w5)((()=>[(0,t.Uk)("乘客總覽")])),_:1}),(0,t.Wm)(S,{size:"small",style:{"margin-right":"5px"},onClick:l[3]||(l[3]=e=>C.reTable())},{default:(0,t.w5)((()=>[(0,t.Uk)("返回")])),_:1})])])):(0,t.kq)("",!0),3==V.showMore?((0,t.wg)(),(0,t.iD)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(V.passengerDetail,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[(0,t._)("p",h,"乘客 "+(0,s.zw)(a+1),1),(0,t._)("p",c,[(0,t.Uk)("旅客編號： "),(0,t._)("span",null,(0,s.zw)(l.passenger_no),1)]),(0,t._)("p",_,[(0,t.Uk)("姓名： "),(0,t._)("span",null,(0,s.zw)(l.passenger_name),1)]),(0,t._)("p",m,[(0,t.Uk)("性別： "),(0,t._)("span",null,(0,s.zw)(l.passenger_gender),1)]),(0,t._)("p",w,[(0,t.Uk)("生日： "),(0,t._)("span",null,(0,s.zw)(l.birthday),1)]),(0,t._)("p",k,[(0,t.Uk)("國籍： "),(0,t._)("span",null,(0,s.zw)(l.passenger_nationality),1)]),(0,t._)("p",g,[(0,t.Uk)("護照號碼："),(0,t._)("span",null,(0,s.zw)(l.passport),1)]),(0,t._)("div",b,[v,(0,t.Wm)(T,{modelValue:l.health_check,"onUpdate:modelValue":e=>l.health_check=e,placeholder:"請選擇審核",style:{width:"200px"},class:"ivu-mb"},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{value:"審核中",label:"審核中"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 審核中 ")])),_:1}),(0,t.Wm)(N,{value:"通過",label:"通過"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 通過 ")])),_:1}),(0,t.Wm)(N,{value:"未通過",label:"未通過"},{default:(0,t.w5)((()=>[(0,t.Uk)(" 未通過 ")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)(D,{class:"ivu-mb",wrap:""},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{size:e.buttonSize,icon:"ios-download-outline",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("體檢報告")])),_:1},8,["size"])])),_:1}),(0,t._)("p",U,[(0,t.Uk)("報名狀態： "),(0,t._)("span",null,(0,s.zw)(l.passenger_status),1)]),(0,t._)("p",y,[(0,t.Uk)("候補順位： "),(0,t._)("span",null,(0,s.zw)(l.alternate_order),1)]),(0,t._)("p",x,[(0,t.Uk)("座位編號： "),(0,t._)("span",null,(0,s.zw)(l.seat_no),1)]),(0,t._)("p",z,[(0,t.Uk)("訓練審核： "),(0,t._)("span",null,(0,s.zw)(l.training_result),1)]),(0,t._)("p",f,[(0,t.Uk)("訓練服尺寸： "),(0,t._)("span",null,(0,s.zw)(l.shirt_size),1)]),(0,t._)("p",W,[(0,t.Uk)("飲食備註: "),(0,t._)("span",null,(0,s.zw)(l.passenger_diet),1)])])))),128)),(0,t._)("div",null,[(0,t.Wm)(S,{size:"small",style:{"margin-right":"5px"},onClick:l[4]||(l[4]=e=>C.toOrders2())},{default:(0,t.w5)((()=>[(0,t.Uk)("返回")])),_:1}),(0,t.Wm)(S,{size:"small",style:{"margin-right":"5px"},onClick:l[5]||(l[5]=e=>C.reTable())},{default:(0,t.w5)((()=>[(0,t.Uk)("確定")])),_:1})])])):(0,t.kq)("",!0)])),_:1})),[[B,850]])])}var C=a(114),M=a(4161),O={data(){return{oindex:0,pindex:0,datac:[],searchOrder:"",searchNumberMem:"",showMore:1,columns:[{title:"訂單編號",key:"orders_no",width:100},{title:"訂購日期",key:"orders_date"},{title:"訂單狀態",key:"orders_stat",width:100},{title:"會員編號",key:"mem_no",width:100},{title:"編輯",slot:"action"}],data:[],passengerDetail:[]}},mounted(){M.Z.get("http://localhost/PV/PVBackend/public/php/Order.php").then((e=>{this.data=e.data,console.log(typeof this.data[0].total_amount),this.datac=[...this.data]})).catch((e=>{console.error("There was an error fetching the orders:",e)}))},components:{Side:C.Z},created(){this.datac=[...this.data]},methods:{toOrders2(){this.showMore=2},More(){this.showMore=2},reTable(){this.showMore=1},remove(e){let l=this.data[e].orders_no;console.log(l),M.Z.post("http://localhost/PV/PVBackend/public/php/OrderDelete.php",{orders_no:l}).then((l=>{console.log(l.data),this.data.splice(e,1)})).catch((e=>{console.log(e),console.log(e.response)}))},passenger(e){this.showMore=3;let l=this.data[e].orders_no;M.Z.post("http://localhost/PV/PVBackend/public/php/OrderPeople.php",{orders_no:l}).then((e=>{this.passengerDetail=e.data,console.log(this.passengerDetail)})).catch((e=>{console.log(e),console.log(e.response)}))},search(e,l){return e.filter((e=>{console.log("Searching with:",l);for(let a in l)if(l[a])return`${e[a]}`.includes(`${l[a]}`);return!0}))},handleSearch1(){console.log(this.datac),this.data=this.search(this.datac,{orders_no:Number(this.searchOrder),mem_no:Number(this.searchNumberMem)})}}},D=a(89);const S=(0,D.Z)(O,[["render",V],["__scopeId","data-v-527fd612"]]);var P=S}}]);
//# sourceMappingURL=Order.js.map